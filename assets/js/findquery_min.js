function LoadData(e){document.getElementById("Searchdata").innerHTML='<span class="animate-spin border-4 border-success border-l-transparent rounded-full w-12 h-12 inline-block align-middle m-auto mb-10"></span>';let t=Qs.stringify({search:SearchKey});axios.request({method:"post",maxBodyLength:1/0,url:"/api/search/topic-search",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t}).then(e=>{location.reload()}).catch(e=>{console.log(e)})}function SentimenLabel(e){return"pos"==e?"badge bg-primary rounded-full":"neg"==e?"badge bg-danger rounded-full":"badge bg-info rounded-full"}function asesmentRender(e){e.forEach(async function(e){document.getElementById("Searchdata").innerHTML+=`<div class="h-screen max-h-[30rem] w-full bg-white shadow-[4px_6px_10px_-3px_#bfc9d4] rounded border border-[#e0e6ed] dark:border-[#1b2e4b] dark:bg-[#191e3a] dark:shadow-none"> <div class="p-5 flex items-center flex-col sm:flex-row"> <div class="mb-5 w-20 h-20 rounded-full overflow-hidden"><img src="${e.thumbnail_user}" alt="${e.screen_name}" class="w-full h-full object-cover"/> </div> <div class="flex-1 ltr:sm:pl-5 rtl:sm:pr-5 text-center sm:text-left"> <h5 class="text-[#3b3f5c] text-[15px] font-semibold mb-2 dark:text-white-light">${e.name}</h5> <p class="mb-2 text-white-dark">@${e.screen_name}</p> <span class="${SentimenLabel(e.sentiment)}">${e.sentiment}</span> <p class="font-semibold text-white-dark mt-4 sm:mt-8">${e.tweet.replaceAll(`${SearchKey}`,`<mark class="undefined " highlightindex="1">${SearchKey}</mark>`)}</p></div></div></div>`})}function SaveTopic(){let e=Qs.stringify({query:SearchKey});axios.request({method:"post",maxBodyLength:1/0,url:"/api/search/topic-save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e}).then(e=>{Swal.fire({icon:"success",title:"Berhasil",text:"Berhasil menyimpan topik",timer:1700}),setTimeout(function(){location.reload()},1900)}).catch(e=>{Swal.fire({icon:"error",title:"Oops...",text:e.response.data.message,timer:5e3})})}function FindQuery(){let e=Qs.stringify({query:SearchKey});axios.request({method:"post",url:"/api/search/userquery",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e}).then(e=>{"query avaliable"!==e.data.message?document.getElementById("Savequery").innerHTML=`<div class="panel"><div class="mb-0"><div class="flex flex-col gap-4"><a href="/admin/dashboard-data/${e.data.id}" type="button" class="btn btn-success w-full">Ke Dashboard</a></div></div></div>`:document.getElementById("Savequery").innerHTML='<div class="panel"><div class="mb-0"><div class="flex flex-col gap-4"><button type="button" onclick="SaveTopic()" class="btn btn-success w-full">Simpan Query</button></div></div></div>'}).catch(e=>{document.getElementById("Savequery").innerHTML='<div class="panel"><div class="mb-0"><div class="flex flex-col gap-4"><button type="button" onclick="SaveTopic()" class="btn btn-success w-full">Simpan Query</button></div></div></div>'})}axios.request({method:"get",maxBodyLength:1/0,url:`/api/search/topic-search?search=${SearchKey}`}).then(e=>{0==e.data.total_data?LoadData(""):(FindQuery(),document.getElementById("TotalData").innerText=e.data.total_data,document.getElementById("twitter").innerText=e.data.detail.twitter+" Data",document.getElementById("facebook").innerText=e.data.detail.facebook+" Data",document.getElementById("instagram").innerText=e.data.detail.instagram+" Data",document.getElementById("news").innerText=e.data.detail.news+" Data",document.getElementById("youtube").innerText=e.data.detail.youtube+" Data",document.getElementById("twpos").innerText="Positif : "+e.data.sentiment_score.twitter[0],document.getElementById("twnet").innerText="Netral : "+e.data.sentiment_score.twitter[1],document.getElementById("twneg").innerText="Negative : "+e.data.sentiment_score.twitter[2],document.getElementById("fbpos").innerText="Positif : "+e.data.sentiment_score.facebook[0],document.getElementById("fbnet").innerText="Netral : "+e.data.sentiment_score.facebook[1],document.getElementById("fbneg").innerText="Negative : "+e.data.sentiment_score.facebook[2],document.getElementById("igpos").innerText="Positif : "+e.data.sentiment_score.instagram[0],document.getElementById("ignet").innerText="Netral : "+e.data.sentiment_score.instagram[1],document.getElementById("igneg").innerText="Negative : "+e.data.sentiment_score.instagram[2],document.getElementById("nypos").innerText="Positif : "+e.data.sentiment_score.news[0],document.getElementById("nynet").innerText="Netral : "+e.data.sentiment_score.news[1],document.getElementById("nyneg").innerText="Negative : "+e.data.sentiment_score.news[2],document.getElementById("ytpos").innerText="Positif : "+e.data.sentiment_score.youtube[0],document.getElementById("ytnet").innerText="Netral : "+e.data.sentiment_score.youtube[1],document.getElementById("ytneg").innerText="Negative : "+e.data.sentiment_score.youtube[2]),asesmentRender(e.data.data)}).catch(e=>{console.log(e)});